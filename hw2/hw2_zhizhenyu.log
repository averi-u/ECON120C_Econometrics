
. 
. *********************************************
. *Econ 120C, WI25
. *Source Code for HW2
. *Name:  Zhizhen Yu
. *Email: zhy008@ucsd.edu
. *PID: A16498056
. *********************************************
. 
. /* Load the dataset and save it under a different name as stated in instructions*/
. 
. use "WAGE_WI25.dta"

. save "WAGE_hw2_WI25_replica.dta", replace
file WAGE_hw2_WI25_replica.dta saved

. 
. /* Always start by checking what is on the dataset */
. describe

Contains data from WAGE_hw2_WI25_replica.dta
 Observations:           700                  
    Variables:            17                  10 Mar 2025 23:58
------------------------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
------------------------------------------------------------------------------------------------
wage            int     %9.0g                 monthly earnings
hours           byte    %9.0g                 average weekly hours
IQ              int     %9.0g                 IQ score
KWW             byte    %9.0g                 knowledge of world work score
educ            byte    %9.0g                 years of education
exper           byte    %9.0g                 years of work experience
tenure          byte    %9.0g                 years with current employer
age             byte    %9.0g                 age in years
married         byte    %9.0g                 =1 if married
black           byte    %9.0g                 =1 if black
south           byte    %9.0g                 =1 if live in south
urban           byte    %9.0g                 =1 if live in SMSA
sibs            byte    %9.0g                 number of siblings
brthord         byte    %9.0g                 birth order
meduc           byte    %9.0g                 mother's education
feduc           byte    %9.0g                 father's education
lwage           float   %9.0g                 natural log of wage
------------------------------------------------------------------------------------------------
Sorted by: 

. 
. /* Question 1 */
. 
. reg lwage educ exper tenure married black urban south

      Source |       SS           df       MS      Number of obs   =       700
-------------+----------------------------------   F(7, 692)       =     29.89
       Model |  25.9031203         7  3.70044576   Prob > F        =    0.0000
    Residual |  85.6701674       692   .12380082   R-squared       =    0.2322
-------------+----------------------------------   Adj R-squared   =    0.2244
       Total |  111.573288       699  .159618437   Root MSE        =    .35185

------------------------------------------------------------------------------
       lwage | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .0629137   .0067787     9.28   0.000     .0496044    .0762231
       exper |   .0094408   .0037809     2.50   0.013     .0020174    .0168641
      tenure |    .007702   .0028357     2.72   0.007     .0021343    .0132697
     married |   .1717338   .0429006     4.00   0.000     .0875027    .2559648
       black |  -.2194249   .0491919    -4.46   0.000    -.3160082   -.1228417
       urban |   .1985127   .0315752     6.29   0.000      .136518    .2605074
       south |  -.0504321   .0303742    -1.66   0.097    -.1100688    .0092046
       _cons |    5.53958   .1225423    45.21   0.000     5.298981    5.780179
------------------------------------------------------------------------------

. scalar q1 = round(_b[educ]*100, 0.1)

. display q1
6.3

. 
. /* Questions 2 and 3*/
. 
. ivregress 2sls lwage (educ = feduc) exper tenure married black urban south, r first

First-stage regressions
-----------------------

                                                        Number of obs =    700
                                                        F(7, 692)     =  46.38
                                                        Prob > F      = 0.0000
                                                        R-squared     = 0.2835
                                                        Adj R-squared = 0.2763
                                                        Root MSE      = 1.8508

------------------------------------------------------------------------------
             |               Robust
        educ | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       exper |   -.178707   .0177724   -10.06   0.000    -.2136012   -.1438127
      tenure |   .0348103   .0145081     2.40   0.017      .006325    .0632955
     married |  -.0499803   .2433855    -0.21   0.837    -.5278429    .4278822
       black |  -.5478614   .2007735    -2.73   0.007    -.9420597   -.1536631
       urban |   .3269488   .1657168     1.97   0.049     .0015808    .6523167
       south |   .1153191   .1542161     0.75   0.455    -.1874684    .4181067
       feduc |   .2124699   .0210538    10.09   0.000      .171133    .2538068
       _cons |   13.07289   .4265962    30.64   0.000     12.23532    13.91047
------------------------------------------------------------------------------


Instrumental variables 2SLS regression            Number of obs   =        700
                                                  Wald chi2(7)    =     175.83
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.1818
                                                  Root MSE        =     .36112

------------------------------------------------------------------------------
             |               Robust
       lwage | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .1085684   .0203701     5.33   0.000     .0686438     .148493
       exper |   .0196226   .0057311     3.42   0.001     .0083898    .0308553
      tenure |   .0055715   .0031411     1.77   0.076     -.000585     .011728
     married |   .1754165   .0454128     3.86   0.000      .086409    .2644241
       black |  -.1821139   .0521377    -3.49   0.000    -.2843018    -.079926
       urban |   .1780636   .0316911     5.62   0.000     .1159503    .2401769
       south |  -.0455644   .0305046    -1.49   0.135    -.1053524    .0142235
       _cons |   4.820563   .3247258    14.85   0.000     4.184112    5.457013
------------------------------------------------------------------------------
Endogenous: educ
Exogenous:  exper tenure married black urban south feduc

. estat firststage

  First-stage regression summary statistics
  --------------------------------------------------------------------------
               |            Adjusted      Partial       Robust
      Variable |   R-sq.       R-sq.        R-sq.      F(1,692)   Prob > F
  -------------+------------------------------------------------------------
          educ |  0.2835      0.2763       0.1202       101.844    0.0000
  --------------------------------------------------------------------------


. display e(widstat)
.

. 
. 
. 
. ivregress 2sls lwage (educ = feduc) exper tenure married black urban south, vce(robust)

Instrumental variables 2SLS regression            Number of obs   =        700
                                                  Wald chi2(7)    =     175.83
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.1818
                                                  Root MSE        =     .36112

------------------------------------------------------------------------------
             |               Robust
       lwage | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .1085684   .0203701     5.33   0.000     .0686438     .148493
       exper |   .0196226   .0057311     3.42   0.001     .0083898    .0308553
      tenure |   .0055715   .0031411     1.77   0.076     -.000585     .011728
     married |   .1754165   .0454128     3.86   0.000      .086409    .2644241
       black |  -.1821139   .0521377    -3.49   0.000    -.2843018    -.079926
       urban |   .1780636   .0316911     5.62   0.000     .1159503    .2401769
       south |  -.0455644   .0305046    -1.49   0.135    -.1053524    .0142235
       _cons |   4.820563   .3247258    14.85   0.000     4.184112    5.457013
------------------------------------------------------------------------------
Endogenous: educ
Exogenous:  exper tenure married black urban south feduc

. scalar q2c = round(_b[educ]*100, 0.1)

. display q2c
10.9

. 
. 
. scalar q3 = round(_b[urban]*100, 0.1)

. display q3
17.8

. 
. /* Questions 4 and 5 */
. reg educ feduc exper tenure married black urban south

      Source |       SS           df       MS      Number of obs   =       700
-------------+----------------------------------   F(7, 692)       =     39.12
       Model |  937.937063         7  133.991009   Prob > F        =    0.0000
    Residual |  2370.30722       692  3.42529945   R-squared       =    0.2835
-------------+----------------------------------   Adj R-squared   =    0.2763
       Total |  3308.24429       699  4.73282444   Root MSE        =    1.8508

------------------------------------------------------------------------------
        educ | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       feduc |   .2124699   .0218506     9.72   0.000     .1695685    .2553713
       exper |   -.178707   .0187894    -9.51   0.000    -.2155981   -.1418159
      tenure |   .0348103    .014873     2.34   0.020     .0056086     .064012
     married |  -.0499803   .2256621    -0.22   0.825    -.4930448    .3930841
       black |  -.5478614   .2585926    -2.12   0.034    -1.055582   -.0401412
       urban |   .3269488   .1657839     1.97   0.049      .001449    .6524485
       south |   .1153191   .1613463     0.71   0.475    -.2014679    .4321062
       _cons |   13.07289   .4193812    31.17   0.000     12.24948    13.89631
------------------------------------------------------------------------------

. predict educ_hat, xb

. 
. 
. reg lwage educ_hat exper tenure married black urban south, vce(robust)

Linear regression                               Number of obs     =        700
                                                F(7, 692)         =      23.29
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1708
                                                Root MSE          =     .36564

------------------------------------------------------------------------------
             |               Robust
       lwage | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
    educ_hat |   .1085684   .0209379     5.19   0.000     .0674589    .1496779
       exper |   .0196226   .0057927     3.39   0.001     .0082491     .030996
      tenure |   .0055715   .0031209     1.79   0.075    -.0005562    .0116991
     married |   .1754165   .0437913     4.01   0.000     .0894368    .2613963
       black |  -.1821139   .0495755    -3.67   0.000    -.2794504   -.0847774
       urban |   .1780636   .0337118     5.28   0.000     .1118739    .2442533
       south |  -.0455644   .0323658    -1.41   0.160    -.1091113    .0179824
       _cons |   4.820563   .3349154    14.39   0.000     4.162991    5.478135
------------------------------------------------------------------------------

. scalar q4 = round(_b[educ_hat]*100, 0.1)

. display q4
10.9

. 
. 
. if q4 < q2c {
.     scalar q4_comp = "lower"
. } 

. else if q4 > q2c {
.     scalar q4_comp = "higher"
. } 

. else {
.     scalar q4_comp = "same"
. }

. display q4_comp
same

. 
. 
. scalar se_q4 = round(_se[educ_hat], 0.01)

. scalar se_q2 = round(_se[educ], 0.01)

. 
. 
. 
. 
. 
. 
. /* Questions 6 */
. 
. ivregress 2sls lwage (educ = meduc) exper tenure married black urban south, vce(robust)

Instrumental variables 2SLS regression            Number of obs   =        700
                                                  Wald chi2(7)    =     161.52
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.1422
                                                  Root MSE        =     .36976

------------------------------------------------------------------------------
             |               Robust
       lwage | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .1239518   .0265399     4.67   0.000     .0719345    .1759691
       exper |   .0230533   .0068238     3.38   0.001      .009679    .0364277
      tenure |   .0048536   .0031487     1.54   0.123    -.0013178     .011025
     married |   .1766575    .046567     3.79   0.000     .0853879     .267927
       black |  -.1695419    .055715    -3.04   0.002    -.2787412   -.0603426
       urban |   .1711732   .0334997     5.11   0.000      .105515    .2368315
       south |  -.0439243   .0311718    -1.41   0.159    -.1050198    .0171713
       _cons |   4.578289   .4211579    10.87   0.000     3.752835    5.403743
------------------------------------------------------------------------------
Endogenous: educ
Exogenous:  exper tenure married black urban south meduc

. scalar q6 = round(_b[educ]*100, 0.1)

. display q6
12.4

. 
. 
. ivregress 2sls lwage (educ = sibs) exper tenure married black urban south, r first

First-stage regressions
-----------------------

                                                        Number of obs =    700
                                                        F(7, 692)     =  32.85
                                                        Prob > F      = 0.0000
                                                        R-squared     = 0.2150
                                                        Adj R-squared = 0.2071
                                                        Root MSE      = 1.9372

------------------------------------------------------------------------------
             |               Robust
        educ | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       exper |  -.2209685   .0181758   -12.16   0.000    -.2566549   -.1852821
      tenure |   .0427301   .0152898     2.79   0.005     .0127103      .07275
     married |  -.0491298   .2460215    -0.20   0.842    -.5321679    .4339084
       black |  -.4266286   .2133264    -2.00   0.046    -.8454732    -.007784
       urban |   .4380927   .1728917     2.53   0.011     .0986374    .7775479
       south |  -.1109161   .1579139    -0.70   0.483    -.4209639    .1991318
        sibs |  -.1662482   .0292795    -5.68   0.000    -.2237355   -.1087609
       _cons |   16.17311   .3530786    45.81   0.000     15.47988    16.86635
------------------------------------------------------------------------------


Instrumental variables 2SLS regression            Number of obs   =        700
                                                  Wald chi2(7)    =     149.95
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.2205
                                                  Root MSE        =     .35249

------------------------------------------------------------------------------
             |               Robust
       lwage | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .0409104   .0335282     1.22   0.222    -.0248037    .1066246
       exper |   .0045336   .0083684     0.54   0.588    -.0118682    .0209355
      tenure |   .0087288   .0031757     2.75   0.006     .0025045    .0149531
     married |   .1699588   .0436529     3.89   0.000     .0844007     .255517
       black |   -.237407    .053262    -4.46   0.000    -.3417987   -.1330154
       urban |   .2083682   .0345276     6.03   0.000     .1406954     .276041
       south |  -.0527781   .0309232    -1.71   0.088    -.1133865    .0078304
       _cons |   5.886112   .5321095    11.06   0.000     4.843196    6.929027
------------------------------------------------------------------------------
Endogenous: educ
Exogenous:  exper tenure married black urban south sibs

. scalar q6b = round(_b[educ]*100, 0.1)

. display q6b
4.1

. 
. 
. reg educ sibs exper tenure married black urban south

      Source |       SS           df       MS      Number of obs   =       700
-------------+----------------------------------   F(7, 692)       =     27.08
       Model |  711.269904         7  101.609986   Prob > F        =    0.0000
    Residual |  2596.97438       692  3.75285315   R-squared       =    0.2150
-------------+----------------------------------   Adj R-squared   =    0.2071
       Total |  3308.24429       699  4.73282444   Root MSE        =    1.9372

------------------------------------------------------------------------------
        educ | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        sibs |  -.1662482   .0326666    -5.09   0.000    -.2303856   -.1021107
       exper |  -.2209685   .0190844   -11.58   0.000    -.2584387   -.1834983
      tenure |   .0427301   .0155348     2.75   0.006     .0122291    .0732311
     married |  -.0491298   .2362637    -0.21   0.835    -.5130095    .4147499
       black |  -.4266286   .2798481    -1.52   0.128    -.9760818    .1228246
       urban |   .4380927   .1730512     2.53   0.012     .0983242    .7778611
       south |  -.1109161   .1671886    -0.66   0.507    -.4391738    .2173417
       _cons |   16.17311   .3415477    47.35   0.000     15.50252    16.84371
------------------------------------------------------------------------------

. scalar sibs_fstat = round(e(statistic), 0.01)

. if sibs_fstat > 10 {
.     scalar sibs_relevance = "relevant"
. } 

. else {
.     scalar sibs_relevance = "not relevant"
. }

. display sibs_relevance
relevant

. 
. 
. if abs(q6 - q6b) < 1 {
.     scalar q6_consistency = "similar"
. } 

. else {
.     scalar q6_consistency = "different"
. }

. display q6_consistency
different

. 
. /* Question 7 */
. 
. 
. ivregress 2sls lwage (educ = feduc meduc sibs) exper tenure married black urban south, r first

First-stage regressions
-----------------------

                                                        Number of obs =    700
                                                        F(9, 690)     =  39.58
                                                        Prob > F      = 0.0000
                                                        R-squared     = 0.3003
                                                        Adj R-squared = 0.2911
                                                        Root MSE      = 1.8316

------------------------------------------------------------------------------
             |               Robust
        educ | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       exper |  -.1788824    .017751   -10.08   0.000    -.2137349   -.1440299
      tenure |   .0323713   .0144532     2.24   0.025     .0039938    .0607488
     married |  -.0039544   .2410475    -0.02   0.987     -.477229    .4693203
       black |   -.274752   .1944463    -1.41   0.158    -.6565294    .1070254
       urban |   .3491814   .1642279     2.13   0.034      .026735    .6716279
       south |   .0962316   .1541272     0.62   0.533     -.206383    .3988462
       feduc |   .1714151   .0265658     6.45   0.000     .1192555    .2235746
       meduc |   .0550934   .0304352     1.81   0.071    -.0046633    .1148501
        sibs |  -.1035811   .0287408    -3.60   0.000     -.160011   -.0471513
       _cons |   13.14588   .4952039    26.55   0.000     12.17359    14.11816
------------------------------------------------------------------------------


Instrumental variables 2SLS regression            Number of obs   =        700
                                                  Wald chi2(7)    =     177.77
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.1988
                                                  Root MSE        =     .35736

------------------------------------------------------------------------------
             |               Robust
       lwage | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .1000952   .0184019     5.44   0.000     .0640281    .1361623
       exper |   .0177329   .0054072     3.28   0.001     .0071349    .0283309
      tenure |   .0059669   .0030371     1.96   0.049     .0000144    .0119194
     married |    .174733    .044852     3.90   0.000     .0868247    .2626414
       black |  -.1890386   .0509732    -3.71   0.000    -.2889442    -.089133
       urban |   .1818588   .0311414     5.84   0.000     .1208227    .2428949
       south |  -.0464678   .0303593    -1.53   0.126    -.1059709    .0130353
       _cons |   4.954007   .2960865    16.73   0.000     4.373689    5.534326
------------------------------------------------------------------------------
Endogenous: educ
Exogenous:  exper tenure married black urban south feduc meduc sibs

. scalar q7 = round(_b[educ]*100, 0.1)

. display q7
10

. 
. 
. if q7 < q2c {
.     scalar q7_effect = "smaller"
. } 

. else {
.     scalar q7_effect = "larger"
. }

. display q7_effect
smaller

. 
. 
. scalar q7_se = round(_se[educ], 0.01)

. if q7_se > se_q2 {
.     scalar q7_se_comp = "higher"
. } 

. else {
.     scalar q7_se_comp = "lower"
. }

. display q7_se_comp
lower

.  
. /* Question 8 */
. 
. 
. 
. ivregress 2sls lwage (educ = feduc meduc sibs) exper tenure married black urban south, r first

First-stage regressions
-----------------------

                                                        Number of obs =    700
                                                        F(9, 690)     =  39.58
                                                        Prob > F      = 0.0000
                                                        R-squared     = 0.3003
                                                        Adj R-squared = 0.2911
                                                        Root MSE      = 1.8316

------------------------------------------------------------------------------
             |               Robust
        educ | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       exper |  -.1788824    .017751   -10.08   0.000    -.2137349   -.1440299
      tenure |   .0323713   .0144532     2.24   0.025     .0039938    .0607488
     married |  -.0039544   .2410475    -0.02   0.987     -.477229    .4693203
       black |   -.274752   .1944463    -1.41   0.158    -.6565294    .1070254
       urban |   .3491814   .1642279     2.13   0.034      .026735    .6716279
       south |   .0962316   .1541272     0.62   0.533     -.206383    .3988462
       feduc |   .1714151   .0265658     6.45   0.000     .1192555    .2235746
       meduc |   .0550934   .0304352     1.81   0.071    -.0046633    .1148501
        sibs |  -.1035811   .0287408    -3.60   0.000     -.160011   -.0471513
       _cons |   13.14588   .4952039    26.55   0.000     12.17359    14.11816
------------------------------------------------------------------------------


Instrumental variables 2SLS regression            Number of obs   =        700
                                                  Wald chi2(7)    =     177.77
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.1988
                                                  Root MSE        =     .35736

------------------------------------------------------------------------------
             |               Robust
       lwage | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .1000952   .0184019     5.44   0.000     .0640281    .1361623
       exper |   .0177329   .0054072     3.28   0.001     .0071349    .0283309
      tenure |   .0059669   .0030371     1.96   0.049     .0000144    .0119194
     married |    .174733    .044852     3.90   0.000     .0868247    .2626414
       black |  -.1890386   .0509732    -3.71   0.000    -.2889442    -.089133
       urban |   .1818588   .0311414     5.84   0.000     .1208227    .2428949
       south |  -.0464678   .0303593    -1.53   0.126    -.1059709    .0130353
       _cons |   4.954007   .2960865    16.73   0.000     4.373689    5.534326
------------------------------------------------------------------------------
Endogenous: educ
Exogenous:  exper tenure married black urban south feduc meduc sibs

. 
. estat firststage

  First-stage regression summary statistics
  --------------------------------------------------------------------------
               |            Adjusted      Partial       Robust
      Variable |   R-sq.       R-sq.        R-sq.      F(3,690)   Prob > F
  -------------+------------------------------------------------------------
          educ |  0.3003      0.2911       0.1408       45.9216    0.0000
  --------------------------------------------------------------------------


. scalar q8 = 45.9

. display q8
45.9

. 
. 
. 
. /* Question 9 */
. 
. 
. ivregress 2sls lwage (educ = feduc meduc sibs) exper tenure married black urban south, r first

First-stage regressions
-----------------------

                                                        Number of obs =    700
                                                        F(9, 690)     =  39.58
                                                        Prob > F      = 0.0000
                                                        R-squared     = 0.3003
                                                        Adj R-squared = 0.2911
                                                        Root MSE      = 1.8316

------------------------------------------------------------------------------
             |               Robust
        educ | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       exper |  -.1788824    .017751   -10.08   0.000    -.2137349   -.1440299
      tenure |   .0323713   .0144532     2.24   0.025     .0039938    .0607488
     married |  -.0039544   .2410475    -0.02   0.987     -.477229    .4693203
       black |   -.274752   .1944463    -1.41   0.158    -.6565294    .1070254
       urban |   .3491814   .1642279     2.13   0.034      .026735    .6716279
       south |   .0962316   .1541272     0.62   0.533     -.206383    .3988462
       feduc |   .1714151   .0265658     6.45   0.000     .1192555    .2235746
       meduc |   .0550934   .0304352     1.81   0.071    -.0046633    .1148501
        sibs |  -.1035811   .0287408    -3.60   0.000     -.160011   -.0471513
       _cons |   13.14588   .4952039    26.55   0.000     12.17359    14.11816
------------------------------------------------------------------------------


Instrumental variables 2SLS regression            Number of obs   =        700
                                                  Wald chi2(7)    =     177.77
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.1988
                                                  Root MSE        =     .35736

------------------------------------------------------------------------------
             |               Robust
       lwage | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
        educ |   .1000952   .0184019     5.44   0.000     .0640281    .1361623
       exper |   .0177329   .0054072     3.28   0.001     .0071349    .0283309
      tenure |   .0059669   .0030371     1.96   0.049     .0000144    .0119194
     married |    .174733    .044852     3.90   0.000     .0868247    .2626414
       black |  -.1890386   .0509732    -3.71   0.000    -.2889442    -.089133
       urban |   .1818588   .0311414     5.84   0.000     .1208227    .2428949
       south |  -.0464678   .0303593    -1.53   0.126    -.1059709    .0130353
       _cons |   4.954007   .2960865    16.73   0.000     4.373689    5.534326
------------------------------------------------------------------------------
Endogenous: educ
Exogenous:  exper tenure married black urban south feduc meduc sibs

. 
. predict uhat_2sls, residuals

. 
. regress uhat_2sls feduc meduc sibs exper tenure married black urban south

      Source |       SS           df       MS      Number of obs   =       700
-------------+----------------------------------   F(9, 690)       =      0.50
       Model |  .584322123         9   .06492468   Prob > F        =    0.8718
    Residual |  88.8104376       690  .128710779   R-squared       =    0.0065
-------------+----------------------------------   Adj R-squared   =   -0.0064
       Total |  89.3947597       699  .127889499   Root MSE        =    .35876

------------------------------------------------------------------------------
   uhat_2sls | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       feduc |  -.0000956   .0051505    -0.02   0.985    -.0102081    .0100169
       meduc |   .0068628   .0059071     1.16   0.246    -.0047351    .0184608
        sibs |   .0119888    .006258     1.92   0.056    -.0002982    .0242759
       exper |   .0007179   .0036469     0.20   0.844    -.0064424    .0078783
      tenure |   5.48e-06   .0028855     0.00   0.998    -.0056599    .0056709
     married |   .0017363   .0438487     0.04   0.968    -.0843566    .0878292
       black |   -.018102   .0519637    -0.35   0.728    -.1201279    .0839238
       urban |   .0013821   .0322124     0.04   0.966    -.0618639    .0646281
       south |   .0035078   .0312922     0.11   0.911    -.0579316    .0649472
       _cons |  -.1176126   .0956345    -1.23   0.219    -.3053822    .0701569
------------------------------------------------------------------------------

. 
. 
. scalar j_fstat = e(F)

. display j_fstat*3
1.5132691

. scalar q9 = round(j_fstat * 3, 3)  

. display "J-statistic = " q9
J-statistic = 3

. 
. 
. if q9 > 5.99 {  
.     scalar q9_reject = "reject"
.     scalar q9_exog = "not exogenous"
. } 

. else {
.     scalar q9_reject = "fail to reject"
.     scalar q9_exog = "exogenous"
. }

. display q9_reject
fail to reject

. display q9_exog
exogenous

. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. scalar list
   q9_exog = exogenous
 q9_reject = fail to reject
        q9 =          3
   j_fstat =  .50442302
        q8 =       45.9
q7_se_comp = lower
     q7_se =        .02
 q7_effect = smaller
        q7 =         10
q6_consistency = different
sibs_relevance = relevant
sibs_fstat =          .
       q6b =        4.1
        q6 =       12.4
     se_q2 =        .02
     se_q4 =        .02
   q4_comp = same
        q4 =       10.9
        q3 =       17.8
       q2c =       10.9
        q1 =        6.3

. 
. log close
      name:  <unnamed>
       log:  /Users/zhizhenyu/code/ECON120C-WI25/hw2/hw2_zhizhenyu.log
  log type:  text
 closed on:  10 Mar 2025, 23:58:50
------------------------------------------------------------------------------------------------
